
"""
๐ฏ ุจูุช ุงูุฏุฑุฏุดุฉ ุงูุนุดูุงุฆูุฉ ุงููุชูุฏู ูุน ุงูุฃูุนุงุจ ุงููุญุณูุฉ
"""

import asyncio
import logging
from bot_main import build_app

# ุฅุนุฏุงุฏ ุงูุชุณุฌูู
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO,
    handlers=[
        logging.FileHandler('bot.log', encoding='utf-8'),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)

async def main():
    """ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ูุชุดุบูู ุงูุจูุช"""
    try:
        print("=" * 50)
        print("๐ฏ ุจูุช ุงูุฏุฑุฏุดุฉ ุงูุนุดูุงุฆูุฉ ุงููุชูุฏู ูุน ุงูุฃูุนุงุจ ุงููุญุณูุฉ")
        print("โจ ุงูุฅุตุฏุงุฑ: 4.0 | ูุธุงู ุงูุฃูุนุงุจ ุงููุญุฏุซ")
        print("=" * 50)
        print("\n๐ **ุฌุงุฑู ุจุฏุก ุงูุชุดุบูู...**")
        
        # ุจูุงุก ุงูุชุทุจูู
        app = build_app()
        
        print("โ **ุชู ุชููุฆุฉ ุงููุธุงู ุจูุฌุงุญ!**")
        print("\n๐ฑ **ุงูุฃูุงูุฑ ุงููุชุงุญุฉ:**")
        print("/start - ุจุฏุก ุงุณุชุฎุฏุงู ุงูุจูุช")
        print("/help - ุนุฑุถ ุงููุณุงุนุฏุฉ")
        print("/profile - ุนุฑุถ ุงูููู ุงูุดุฎุตู")
        print("/reward - ุงูุญุตูู ุนูู ุงูููุงูุฃุฉ (3 ููุงุท ูู ุณุงุนุฉ)")
        print("/report - ุงูุฅุจูุงุบ ุนู ูุณุชุฎุฏู")
        print("\n๐ฎ **ุงูุฃูุนุงุจ ุงูุฌุฏูุฏุฉ:**")
        print("โข XO ุงูุนุดูุงุฆู - ุงููุงุฆุฒ ููุณุจ 5 ููุงุท ูู ุงูุฎุงุณุฑ")
        print("โข ุชุฎููู ุงูุฑูู - ุงูููุฒ: +5 ููุงุทุ ุงูุฎุณุงุฑุฉ: -2 ููุงุท")
        
        print("\n๐ **ูููุฒุงุช VIP ุจุงููุฌูู:**")
        print("โข ููู ูุงุญุฏ: 10 โญ")
        print("โข ููููู: 15 โญ")
        print("โข 3 ุฃูุงู: 25 โญ")
        print("โข ุฃุณุจูุน: 40 โญ")
        print("โข ุฃุณุจูุนูู: 70 โญ")
        print("โข ุดูุฑ: 100 โญ")
        
        print("\n๐ค **ุงูุจูุช ูุนูู ุงูุขู!**")
        
        # ุชุดุบูู ุงูุจูุช
        await app.initialize()
        await app.start()
        await app.updater.start_polling()
        
        # ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุฅููุงู ุงูุจูุช
        await asyncio.Event().wait()
        
    except KeyboardInterrupt:
        print("\n๐ **ุชู ุฅููุงู ุงูุจูุช ุจูุงุณุทุฉ ุงููุณุชุฎุฏู.**")
    except Exception as e:
        logger.error(f"โ ุฎุทุฃ ูู ุชุดุบูู ุงูุจูุช: {e}")
        print(f"\nโ **ุญุฏุซ ุฎุทุฃ:** {e}")
        print("๐ง **ุฌุงุฑู ุฅุนุงุฏุฉ ุงูุชุดุบูู ุชููุงุฆูุงู ุฎูุงู 10 ุซูุงูู...**")
        await asyncio.sleep(10)
        await main()
    finally:
        try:
            await app.stop()
        except:
            pass

if __name__ == "__main__":
    asyncio.run(main())
